<p-table
    styleClass="p-datatable-striped p-datatable-sm p-datatable-gridlines"
    [lazy]="true" (onLazyLoad)="LoadDataLazy($event)" [loading]="Loading"
    [columns]="Cols" [value]="MaterialsListData"
    [paginator]="true" [rows]="50" [showCurrentPageReport]="true" [rowsPerPageOptions]="[10,25,50]"
      currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
    [totalRecords]="TotalRecords"
    selectionMode="single" (onRowSelect)="OnRowSelect($event.data)" (onRowUnselect)="OnRowUnSelect()"
    [autoLayout]=true>
  <ng-template pTemplate="caption">

    <p-toolbar>
      <ng-template pTemplate="left">
        <!-- All, Signed, Unsigned -->
        <div class="p-formgroup-inline">
          <div *ngFor="let category of Categories" class="p-field-checkbox">
            <p-radioButton
              (onClick)="RefreshTable()"
              inputId="category.key"
              name="category"
              [value]="category"
              [(ngModel)]="SelectedCategory"></p-radioButton>
            <label [for]="category.key">{{category.name}}</label>
          </div>
          <!-- Date selection -->
          <div class="p-field">
            <label for="spanish">Select date range </label>
            <p-calendar
              (onClose)="RefreshTable()"
              [showIcon]="true"
              [(ngModel)]="DateRange"
              [touchUI]="true"
              showButtonBar="true"
              selectionMode="range"
              [locale]="UkrainianDate" dateFormat="yy-mm-dd"
              inputId="ukrianian"></p-calendar>
          </div>
        </div>
      </ng-template> 

      <ng-template pTemplate="right">
        <!-- Refresh button -->
        <button type="button" pButton icon="pi pi-refresh" class="p-button-rounded"
          (click)="RefreshTable()" style="margin-right:.5em">
        </button>
      </ng-template>    
      
    </p-toolbar>
  </ng-template>
  <!-- Headers -->
  <ng-template pTemplate="header" let-columns>
    <tr>
      <th class="sticky-row" *ngFor="let col of columns">
          {{col.header}}
      </th>
      <th>Actions</th>
    </tr>
  </ng-template>

  <!-- Fields -->
  <ng-template pTemplate="body" let-rowData let-columns="columns">
      <tr [pSelectableRow]="rowData">
          <td *ngFor="let col of columns">
            <div *ngIf="(col.field == 'SignMark'); else default">
              <i class="pi" [ngClass]="{'true-icon pi-check-circle': rowData['SignMark'], 'false-icon pi-times-circle': !rowData['SignMark']}"></i>
            </div>
            <ng-template #default>{{rowData[col.field]}}</ng-template>
          </td>
          <td>
            <!-- Arrival button -->
            <button type="button" [disabled]="!MaterialReceiptSelected" pButton
              label="Arrival" class="p-button-success"
              (click)="OnArrivalClicked()" style="margin-right:.5em">
            </button>

            <!-- Location -->
            <button type="button" pButton [disabled]="!MaterialReceiptSelected"
            label="Location" class="p-button-success"
            (click)="RefreshTable()">
          </button>
          </td>
      </tr>
  </ng-template>
</p-table>